<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –¢—Ä–µ–∫–µ—Ä –†–∞—Å—Ö–æ–¥–æ–≤</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 400px;
        }

        h1 {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            color: #bb86fc;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∏—Ç–æ–≥–∞–º–∏ */
        .summary-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .card {
            background-color: #1e1e1e;
            border-radius: 12px;
            padding: 15px;
            flex: 1;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .card h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #a0a0a0;
        }

        .card .amount {
            font-size: 24px;
            font-weight: bold;
            color: #03dac6;
        }

        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */
        .input-group {
            margin-bottom: 20px;
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            border-radius: 10px;
            border: 2px solid #333;
            background-color: #2c2c2c;
            color: white;
            box-sizing: border-box;
            text-align: center;
        }

        input:focus {
            outline: none;
            border-color: #bb86fc;
        }

        /* –ö–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
        .categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        button.category-btn {
            padding: 15px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            background-color: #3700b3;
            color: white;
            cursor: pointer;
            transition: transform 0.1s;
        }

        button.category-btn:active {
            transform: scale(0.95);
        }

        /* –ò—Å—Ç–æ—Ä–∏—è */
        .history {
            background-color: #1e1e1e;
            border-radius: 12px;
            padding: 10px;
            min-height: 200px;
        }

        .history h3 {
            margin-top: 0;
            padding-left: 10px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #333;
        }

        li:last-child {
            border-bottom: none;
        }

        .del-btn {
            background-color: #cf6679;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ */
        .reset-section {
            margin-top: 30px;
            text-align: center;
        }
        
        .reset-btn {
            background: transparent;
            border: 1px solid #cf6679;
            color: #cf6679;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }

    </style>
</head>
<body>

<div class="container">
    <h1>–ú–æ–∏ –§–∏–Ω–∞–Ω—Å—ã</h1>

    <!-- –ò–¢–û–ì–ò -->
    <div class="summary-box">
        <div class="card">
            <h3>–ó–∞ –°–ï–ì–û–î–ù–Ø</h3>
            <div class="amount" id="totalToday">0 ‚ÇΩ</div>
        </div>
        <div class="card">
            <h3>–ó–∞ –ú–ï–°–Ø–¶</h3>
            <div class="amount" id="totalMonth">0 ‚ÇΩ</div>
        </div>
    </div>

    <!-- –í–í–û–î -->
    <div class="input-group">
        <input type="number" id="amountInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (‚ÇΩ)">
    </div>

    <!-- –ö–ê–¢–ï–ì–û–†–ò–ò -->
    <div class="categories">
        <button class="category-btn" onclick="addExpense('–ï–¥–∞')">üçî –ï–¥–∞</button>
        <button class="category-btn" onclick="addExpense('–ê–≤—Ç–æ')">üöó –ê–≤—Ç–æ</button>
        <button class="category-btn" onclick="addExpense('–î–æ–º')">üè† –î–æ–º</button>
        <button class="category-btn" onclick="addExpense('–†–∞–∑–Ω–æ–µ')">üéâ –†–∞–∑–Ω–æ–µ</button>
    </div>

    <!-- –ò–°–¢–û–†–ò–Ø -->
    <div class="history">
        <h3>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
        <ul id="historyList">
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –ø–∞–¥–∞—Ç—å –∑–∞–ø–∏—Å–∏ -->
        </ul>
    </div>

    <div class="reset-section">
        <button class="reset-btn" onclick="clearAll()">‚ö†Ô∏è –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
    </div>
</div>

<script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
    let transactions = JSON.parse(localStorage.getItem('myExpenses')) || [];

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
    function updateUI() {
        const list = document.getElementById('historyList');
        const totalTodayEl = document.getElementById('totalToday');
        const totalMonthEl = document.getElementById('totalMonth');
        
        list.innerHTML = '';
        
        let sumToday = 0;
        let sumMonth = 0;
        
        const now = new Date();
        const todayStr = now.toLocaleDateString(); // "15.02.2025"
        const currentMonth = now.getMonth(); // 0-11

        // –°–æ—Ä—Ç–∏—Ä—É–µ–º: –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É
        transactions.slice().reverse().forEach(t => {
            const item = document.createElement('li');
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            const tDate = new Date(t.date);
            
            // –°—á–∏—Ç–∞–µ–º —Å—É–º–º—É –∑–∞ –°–ï–ì–û–î–ù–Ø
            if (tDate.toLocaleDateString() === todayStr) {
                sumToday += t.amount;
            }
            
            // –°—á–∏—Ç–∞–µ–º —Å—É–º–º—É –∑–∞ –≠–¢–û–¢ –ú–ï–°–Ø–¶
            if (tDate.getMonth() === currentMonth && tDate.getFullYear() === now.getFullYear()) {
                sumMonth += t.amount;
            }

            // –ö—Ä–∞—Å–∏–≤–∞—è –¥–∞—Ç–∞ –¥–ª—è —Å–ø–∏—Å–∫–∞
            const displayTime = tDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const displayDate = tDate.toLocaleDateString();

            item.innerHTML = `
                <div>
                    <strong>${t.category}</strong> <br>
                    <span style="font-size: 12px; color: #888">${displayDate} –≤ ${displayTime}</span>
                </div>
                <div style="display:flex; align-items:center;">
                    <span style="color: #03dac6; font-weight:bold; margin-right:10px;">${t.amount} ‚ÇΩ</span>
                    <button class="del-btn" onclick="deleteItem(${t.id})">X</button>
                </div>
            `;
            list.appendChild(item);
        });

        totalTodayEl.innerText = sumToday + ' ‚ÇΩ';
        totalMonthEl.innerText = sumMonth + ' ‚ÇΩ';

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å
        localStorage.setItem('myExpenses', JSON.stringify(transactions));
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞
    function addExpense(category) {
        const input = document.getElementById('amountInput');
        const amount = parseFloat(input.value);

        if (!amount || amount <= 0) {
            alert("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É!");
            return;
        }

        const transaction = {
            id: Date.now(),
            amount: amount,
            category: category,
            date: new Date()
        };

        transactions.push(transaction);
        input.value = ''; // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ
        updateUI();
    }

    // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
    function deleteItem(id) {
        if(confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')) {
            transactions = transactions.filter(t => t.id !== id);
            updateUI();
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
    function clearAll() {
        if(confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–Æ –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å—Ö–æ–¥–æ–≤!')) {
            transactions = [];
            updateUI();
        }
    }

    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
    updateUI();
</script>

</body>
</html>
